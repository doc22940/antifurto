Webserver install
----------------------------------------------------------------
See https://wiki.ubuntu.com/Lighttpd+PHP

> sudo apt-get install lighttpd php5-cgi
> sudo lighty-enable-mod fastcgi 
> sudo lighty-enable-mod fastcgi-php
> sudo service lighttpd force-reload

install python dependencies
> sudo apt-get install python-flup

copy the web interface in /var/www
> cp -r webpages/* /var/www/

copy the fcgi frontend
> sudo mkdir /var/www/webapps/
> sudo cp /build/dir/frontend/antifurto_fcgi /var/www/webapps/

link the archive dir
> ln -s /path/to/archive /var/www/archive/pics

apply configuration
> cd /etc/lighttpd/
> sudo cp lighttpd.conf lighttpd.conf.bak
use one of the following options:
option 1: patch
    > diff -Naur lighttpd.conf /path/to/project/config/lighttpd.conf.patched > patch
    > sudo patch lighttpd < patch
option 2: merge
    > sudo merge lighttpd.conf /.../lighttpd.conf.original /.../lighttpd.conf.patched
option 3: overwrite
    > sudo cp /.../lighttpd.conf.patched lighttpd.conf
restart service
> sudo service lighttpd restart

copy and edit the password file
> cd /etc/lighttpd
> sudo cp /path/to/project/config/lighttpd.passwd .
> sudo chown root:root lighttpd.passwd
> sudo chmod 644 lighttpd.passwd
edit the file
> sudo vi lighttpd.passwd
writing your password:
admin:write-your-password-here

add permissions to www-data to send signals to antifurto
> sudo visudo -f /etc/sudoers.d/antifurto
  add the following line to the file
    www-data myhost = (root) NOPASSWD: /usr/bin/killall
  where myhost is the hostname (e.g. rasberry)


Antifurto install
----------------------------------------------------------------

setup init script
- edit /etc/rc.local
- add this line before "exit 0"
  /path/to/antifurto &
> sudo cp /path/to/project/script/init.sh /etc/init.d/antifurto
> cd /etc/init.d/
> sudo chmod 755 antifurto
> sudo update-rc.d antifurto defaults

install zeromq dependencies:
> sudo apt-get install libzmq3-dev

logrotate script
> copy /path/to/project/config/antifurto_logrotate /etc/logrotate.d/antifurto

setup core file limit
- edit /etc/rc.local
- add this line before the "antifurto" startup command:
  ulimit -c unlimited
> sudo mkdir /var/log/dumps
- edit /etc/sysctl.conf
- add this line at the end (if not already present)
  kernel.core_pattern=/var/log/dumps/core.%e.%p
